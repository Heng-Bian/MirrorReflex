#   多智能体文风仿写系统 (MirrorAgent)

这是一个基于 LangGraph 构建的多智能体协同写作系统。它能够深度分析样文的“文风指纹”，并将用户简单的创作意图或指令，自动扩充并转化为高度契合目标文风的精美文本。

## 🚀 系统核心亮点

### 1. 深度文风基因解析 (Style DNA Analysis)
系统不只是简单的词替换，而是通过 `Analyst Agent` 从以下维度深度解构样文：
- **词汇与句式**：分析词汇偏好、长度节奏、特殊句式。
- **故事要素提取**：自动总结样文的时间、地点背景及人物关系。
- **结构建模**：识别样文的推进动力（如：对话驱动 vs 动作驱动）。

### 2. 智能情境拓展空间 (Intelligent Expander)
当用户输入极其简短（如：“讨论洛必达法则”）或仅为指令时，`Expander Agent` 会：
- **背景注入**：自动复用样文的人物与环境设定。
- **内容扩量**：在保持样文篇幅对齐的前提下，将干瘪的逻辑转化为生动的故事素材。

### 3. 多轮迭代与降级保护机制 (Feedback Loop & Rollback)
系统采用 `Writer-Critic` 架构进行持续打磨：
- **严苛评审**：`Critic Agent` 针对神韵、结构、跨领域词汇处理进行严厉评分。
- **自动迭代**：只有评分达到 9.8 以上才视为“完美交付”，否则持续精修。
- **降级保护**：如果新一轮修改导致评分下降，系统会**立刻熔断并回退**到历史最高分版本。

## 🛠 实现流程 (Workflow)

1. **分析 (Analyst)**：破译样文文风，提取故事要素。
2. **决策/拓展 (Expander)**：判断输入是否充实，按需自动续写故事，复用人物地点。
3. **初稿 (Writer)**：根据指纹档案，进行第一次文风仿写。
4. **评估 (Critic)**：评分并给出精修建议。
5. **循环 (Continue/End)**：根据评分结果决定是返回 `Writer` 再次优化，还是直接交付。

## 📝 仿写效果示例

**样文风格**：古典小说式 (`三国演义·煮酒论英雄` 风格)
**用户输入**：`两人在谈论洛必达和二阶导数`

**最终交付结果**：
> 青衫者忽抬眼，凝视案上残纸，徐曰：“前日读《微积分》，见洛必达之法，心甚疑之。其理虽简，然用之如刀，剖分母为零之困局，直指混沌之枢，岂非妙哉？”
> 
> 素袍者颔首，指尖轻抚案上残稿，低声道：“然则此术不过权宜之计，若不察函数之本源，便贸然施之，反成谬误。譬如二阶导数，岂可仅观其形？须知其变率之变率，方得曲直之真意。”言罢，眸光微闪，似有雷动于内。

## 🛠 开发环境
- **Engine**: LangGraph
- **Model**: Qwen-Flash (via Dashscope)
- **Language**: Python
